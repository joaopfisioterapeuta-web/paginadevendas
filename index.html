<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reabilita√ß√£o Inteligente | Jo√£o Paulo Cardozo</title>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ü¶∂</text></svg>">
    
    <meta name="theme-color" content="#2563eb">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;900&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #1e293b; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .active-tab { background-color: #2563eb; color: white; box-shadow: 0 4px 12px rgba(37, 99, 235, 0.3); }
        .achievement-card { transition: transform 0.2s; }
        .achievement-card:active { transform: scale(0.98); }
        .custom-checkbox:checked + label { text-decoration: line-through; color: #94a3b8; }
        .animate-fade-in { animation: fadeIn 0.5s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="antialiased min-h-screen pb-32">

    <header class="bg-white/90 backdrop-blur-md border-b border-slate-200 sticky top-0 z-50">
        <div class="max-w-2xl mx-auto px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-3 cursor-pointer" onclick="renderPhase(0)">
                <div class="w-10 h-10 rounded-xl bg-slate-200 flex items-center justify-center shadow-lg overflow-hidden relative border border-slate-100">
                    <img src="foto-jp.jpg" alt="JP" class="w-full h-full object-cover" onerror="this.style.display='none'; this.parentElement.innerHTML='JP'; this.parentElement.classList.add('bg-blue-600', 'text-white', 'font-black', 'italic')">
                </div>
                <div>
                    <span class="block text-[10px] font-black tracking-widest text-slate-400 uppercase">Fisioterapia</span>
                    <span class="block text-xs font-black tracking-tighter text-slate-800 leading-none">REABILITA√á√ÉO INTELIGENTE</span>
                </div>
            </div>
            <div class="flex items-center gap-3">
                <div class="text-right hidden sm:block">
                    <p class="text-[9px] font-black text-slate-400 uppercase tracking-widest">Progresso</p>
                    <p id="header-perc" class="text-xs font-black text-blue-600">0%</p>
                </div>
                <div class="w-10 h-10 relative flex items-center justify-center">
                    <svg class="w-full h-full transform -rotate-90" viewBox="0 0 36 36">
                        <path class="text-slate-100" stroke-width="3" stroke="currentColor" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                        <path id="progress-circle" class="text-blue-600 transition-all duration-1000" stroke-width="3" stroke-dasharray="0, 100" stroke-linecap="round" stroke="currentColor" fill="none" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
                    </svg>
                </div>
            </div>
        </div>
    </header>

    <main class="max-w-2xl mx-auto px-6 py-6">
        
        <nav class="flex gap-2 p-1 bg-slate-200 rounded-2xl mb-8 overflow-x-auto no-scrollbar shadow-inner sticky top-20 z-40">
            <button onclick="renderPhase(0)" id="tab-0" class="flex-1 py-3 px-4 rounded-xl text-[10px] font-black transition-all whitespace-nowrap active-tab">IN√çCIO</button>
            <button onclick="renderPhase(1)" id="tab-1" class="flex-1 py-3 px-4 rounded-xl text-[10px] font-black transition-all whitespace-nowrap text-slate-500">FASE 1</button>
            <button onclick="renderPhase(2)" id="tab-2" class="flex-1 py-3 px-4 rounded-xl text-[10px] font-black transition-all whitespace-nowrap text-slate-500">FASE 2</button>
            <button onclick="renderPhase(3)" id="tab-3" class="flex-1 py-3 px-4 rounded-xl text-[10px] font-black transition-all whitespace-nowrap text-slate-500">FASE 3</button>
        </nav>

        <div id="phase-content" class="animate-fade-in"></div>

    </main>

    <nav class="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur border-t border-slate-200 p-4 z-50 safe-area-bottom">
        <div class="max-w-2xl mx-auto flex items-center justify-between">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-full bg-slate-100 flex items-center justify-center text-xl">üí¨</div>
                <div>
                    <p class="text-[10px] font-black text-slate-400 leading-none">D√öVIDAS?</p>
                    <p class="text-xs font-bold text-slate-700">Suporte T√©cnico</p>
                </div>
            </div>
            <a href="mailto:joaopfisioterapeuta@gmail.com" class="bg-slate-900 text-white px-5 py-3 rounded-xl text-[10px] font-black shadow-lg active:scale-95 transition-transform">ENVIAR E-MAIL</a>
        </div>
    </nav>

    <script>
        // --- DADOS DO PORTAL ---
        const portalData = {
            0: {
                type: "intro",
                title: "üëã Seja bem-vindo √† sua recupera√ß√£o!",
                intro: "Voc√™ n√£o precisa passar por isso sozinho. Este guia foi desenhado para te levar com seguran√ßa desde o repouso at√© sua volta a caminhar.",
                instructions: "Identifique em qual fase voc√™ est√° e toque nela para abrir. Siga o checklist de cada fase antes de avan√ßar.",
                phases_summary: [
                    { id: 1, icon: "üõ°Ô∏è", title: "Fase 1: Prote√ß√£o", sub: "Semana 0-4 ‚Ä¢ Foco em desinchar" },
                    { id: 2, icon: "üë£", title: "Fase 2: Mobilidade", sub: "M√©dico liberou p√© no ch√£o" },
                    { id: 3, icon: "üí™", title: "Fase 3: For√ßa Total", sub: "Carga Total liberada" }
                ],
                disclaimer: "‚ö†Ô∏è Aviso: O retorno ao esporte exige avalia√ß√£o presencial do seu m√©dico."
            },
            1: {
                title: "FASE 1: üõ°Ô∏è Prote√ß√£o e Controle",
                subtitle: "Semanas 0 a 4",
                intro: "Objetivo Principal: Controlar a dor e o incha√ßo (edema) da cirurgia e 'acordar' os m√∫sculos da perna sem prejudicar a cicatriza√ß√£o.",
                warning: "üö® Sinais de Alerta: Dor aguda na panturrilha (Trombose), secre√ß√£o na ferida ou dedos p√°lidos/frios.",
                regraOuro: "A Regra de Ouro: Nesta fase, menos √© mais. Se sentir dor aguda ou 'pontadas' na cirurgia, pare imediatamente.",
                driveLink: "https://drive.google.com/file/d/1N7-q2EIOh5bYqCLatPmHZFw73GjCUK-E/view?usp=drivesdk",
                achievements: [
                    "Ferida cir√∫rgica est√° seca e cicatrizada",
                    "Consigo controlar a dor sem rem√©dios fortes",
                    "Incha√ßo diminui ap√≥s repouso com gelo",
                    "Consigo ficar sentado com p√© no ch√£o 15-20min sem dor"
                ],
                sections: [
                    {
                        name: "Protocolo de Prote√ß√£o (Di√°rio)",
                        desc: "üßä Gelo: 20min a cada 4h.\nü¶µ Eleva√ß√£o: Perna acima do cora√ß√£o 30min (3x/dia).\nü¶∂ Movimento: Mexer dedos sempre.",
                        dosage: "Todo dia"
                    },
                    {
                        name: "1. Bombeamento Isom√©trico (A 'Bomba')",
                        desc: "Fa√ßa for√ßa na batata da perna como se quisesse pisar no acelerador, mas SEM deixar o p√© mexer. Segure 3s e relaxe.",
                        dosage: "3x 10 reps"
                    },
                    {
                        name: "2. O 'Pianista' (Mobilidade)",
                        desc: "Com a perna esticada, tente abrir bem os dedos dos p√©s e depois fechar com for√ßa (agarrar objeto).",
                        dosage: "3x 15 reps"
                    },
                    {
                        name: "3. Ativa√ß√£o de Gl√∫teo",
                        desc: "Deitado, aperte uma n√°dega contra a outra com for√ßa. Segure 5s e relaxe. Ajuda na estabilidade do quadril.",
                        dosage: "3x 15 reps"
                    },
                    {
                        name: "4. Eleva√ß√£o de Perna",
                        desc: "Deitado, trave o joelho (perna dura) e levante a perna inteira esticada. Fortalece a coxa sem for√ßar o p√©.",
                        dosage: "3x 10 reps"
                    },
                    {
                        name: "5. P√© no Ch√£o (Adapta√ß√£o)",
                        desc: "Sentado, apoie a planta do p√© suavemente no ch√£o sem jogar peso. Comece com 2 min e aumente at√© 15 min.",
                        dosage: "2 min -> 15 min"
                    }
                ]
            },
            2: {
                title: "FASE 2: üë£ Mobilidade",
                subtitle: "P√© no ch√£o liberado",
                intro: "Objetivo: Recuperar o movimento do tornozelo (para cima e para baixo) e come√ßar a acostumar o p√© a tocar no ch√£o novamente.",
                warning: "‚ö†Ô∏è Requisito: O exerc√≠cio de 'Balan√ßa' s√≥ deve ser feito se o m√©dico liberou Carga Parcial.",
                driveLink: "https://drive.google.com/file/d/1aECf1_hLa0Xfyr_RHAvSQXT_GInZ7TqL/view?usp=drivesdk",
                achievements: [
                    "Apoio a planta do p√© toda no ch√£o sem dor",
                    "M√©dico liberou largar uma das muletas",
                    "O incha√ßo diminuiu bem"
                ],
                sections: [
                    {
                        name: "1. Alongamento com Toalha",
                        desc: "Puxe a ponta do p√© com uma toalha at√© sentir 'repuxar' a batata da perna.",
                        dosage: "3x 30 seg"
                    },
                    {
                        name: "2. O 'Acelerador' Sem Carga",
                        desc: "Leve o p√© o m√°ximo para cima e para baixo. Tente ganhar 1mm a cada repeti√ß√£o. Movimento lento.",
                        dosage: "3x 15 reps"
                    },
                    {
                        name: "3. O Acelerador (Com El√°stico)",
                        desc: "Empurre para baixo contra o el√°stico e segure a volta bem devagar. O segredo √© o controle.",
                        dosage: "3x 15 reps"
                    },
                    {
                        name: "4. Descarga de Peso (Balan√ßa)",
                        desc: "Em p√© com muletas, transfira levemente o peso para o p√© operado (como pisar em ovos).",
                        dosage: "3x 1 min"
                    }
                ]
            },
            3: {
                title: "FASE 3: üí™ For√ßa Total",
                subtitle: "Carga Total Liberada",
                intro: "Objetivo: Recuperar a for√ßa da panturrilha (essencial para andar sem mancar) e treinar o equil√≠brio.",
                warning: "‚õî Requisito: S√≥ inicie se o m√©dico liberou Carga Total (pisar com todo o peso).",
                driveLink: "https://drive.google.com/file/d/1s96n1p49pQJZC0OXRtFfHr0oVYTG4op2/view?usp=drivesdk",
                achievements: [
                    "Fico na ponta dos p√©s sem dor",
                    "Equil√≠brio num p√© s√≥ (10s)",
                    "Subo degraus sem apoio",
                    "Caminho sem coxear"
                ],
                sections: [
                    {
                        name: "1. O Joelho na Parede (Mobilidade)",
                        desc: "P√© a 10cm da parede, toque o joelho na parede sem tirar o calcanhar do ch√£o. Segure 2s.",
                        dosage: "3x 12 reps"
                    },
                    {
                        name: "2. Eleva√ß√£o de Calcanhar",
                        desc: "Suba na ponta dos p√©s (Bipodal). Evolua para um p√© s√≥ (Unipodal) descendo bem devagar.",
                        dosage: "3x 15 reps"
                    },
                    {
                        name: "3. Mini-Agachamento",
                        desc: "Apoie na cadeira e dobre levemente os joelhos. N√£o tire calcanhares do ch√£o. N√£o precisa descer muito.",
                        dosage: "3x 10 reps"
                    },
                    {
                        name: "4. Equil√≠brio Unipodal (O 'Gar√ßa')",
                        desc: "Equilibre-se na perna operada. Tente soltar a m√£o da parede aos poucos.",
                        dosage: "3x 30 seg"
                    },
                    {
                        name: "5. Passo sobre Obst√°culo",
                        desc: "Passe a perna boa por cima de um objeto enquanto equilibra na operada.",
                        dosage: "3x 10 voltas"
                    }
                ]
            }
        };

        // --- L√ìGICA DO APP ---
        let userState = JSON.parse(localStorage.getItem('jp_portal_state')) || {};
        let activePhase = 0;

        function renderPhase(id) {
            activePhase = id;
            const container = document.getElementById('phase-content');
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // Atualiza bot√µes do menu (Tabs)
            for(let i=0; i<=3; i++) {
                const btn = document.getElementById('tab-'+i);
                if(btn) {
                    if (i === id) {
                        btn.className = "flex-1 py-3 px-4 rounded-xl text-[10px] font-black transition-all whitespace-nowrap active-tab scale-105";
                    } else {
                        btn.className = "flex-1 py-3 px-4 rounded-xl text-[10px] font-black transition-all whitespace-nowrap text-slate-500 bg-white hover:text-blue-600";
                    }
                }
            }

            // --- TELA DE IN√çCIO (INTRO) ---
            if (id === 0) {
                const data = portalData[0];
                container.innerHTML = `
                    <div class="animate-fade-in space-y-6">
                        <div class="bg-blue-600 rounded-[2rem] p-8 text-white shadow-xl relative overflow-hidden">
                            <div class="relative z-10">
                                <h2 class="text-3xl font-black mb-4 leading-tight">${data.title}</h2>
                                <p class="text-blue-100 text-sm leading-relaxed mb-6 font-medium">${data.intro}</p>
                                <p class="text-[10px] font-black uppercase tracking-widest text-blue-300">Como usar:</p>
                                <p class="text-xs text-blue-50 mt-1">${data.instructions}</p>
                            </div>
                            <div class="absolute -bottom-10 -right-10 w-40 h-40 bg-blue-500 rounded-full opacity-50"></div>
                        </div>

                        <div class="grid grid-cols-1 gap-4">
                            ${data.phases_summary.map(phase => `
                                <div onclick="renderPhase(${phase.id})" class="bg-white p-6 rounded-3xl border border-slate-200 shadow-sm cursor-pointer hover:border-blue-300 transition-all flex items-center gap-4 group active:scale-95">
                                    <div class="w-12 h-12 rounded-full bg-blue-50 flex items-center justify-center text-xl group-hover:scale-110 transition-transform">${phase.icon}</div>
                                    <div>
                                        <h3 class="font-black text-slate-800">${phase.title}</h3>
                                        <p class="text-xs text-slate-500">${phase.sub}</p>
                                    </div>
                                    <div class="ml-auto text-blue-300">‚ûú</div>
                                </div>
                            `).join('')}
                        </div>

                        <p class="text-[10px] text-slate-400 text-center px-8 leading-relaxed mt-8">${data.disclaimer}</p>
                    </div>
                `;
                return;
            }

            // --- TELA DAS FASES (1, 2, 3) ---
            const data = portalData[id];
            
            let html = `
                <div class="animate-fade-in">
                    <div class="mb-8">
                        <span class="inline-block px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-[10px] font-bold uppercase mb-2 tracking-wider">${data.subtitle}</span>
                        <h2 class="text-3xl font-black text-slate-900 leading-tight mb-3">${data.title}</h2>
                        <p class="text-slate-600 text-sm leading-relaxed">${data.intro}</p>
                        
                        ${data.regraOuro ? `
                        <div class="mt-4 p-4 bg-blue-50 border-l-4 border-blue-400 rounded-r-xl">
                            <p class="text-xs text-blue-800 font-bold leading-relaxed">${data.regraOuro}</p>
                        </div>` : ''}

                        ${data.warning ? `
                        <div class="mt-4 p-4 bg-amber-50 border-l-4 border-amber-400 rounded-r-xl">
                            <p class="text-xs text-amber-800 font-bold leading-relaxed">${data.warning}</p>
                        </div>` : ''}

                        <a href="${data.driveLink}" target="_blank" class="mt-6 flex items-center justify-center gap-3 w-full bg-blue-600 text-white py-4 rounded-2xl shadow-lg shadow-blue-200 active:scale-95 transition-transform group">
                            <span class="text-xl group-hover:scale-110 transition-transform">üé•</span>
                            <span class="font-black text-sm uppercase tracking-wider">Assistir V√≠deo da Aula</span>
                        </a>
                    </div>

                    <div class="mb-10 bg-white rounded-3xl p-6 shadow-sm border border-slate-100">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Checklist de Evolu√ß√£o</h3>
                            <span id="phase-counter" class="text-[10px] font-black text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full">0/0</span>
                        </div>
                        <div class="space-y-3">
                            ${data.achievements.map((ach, idx) => {
                                const key = `f${id}_c${idx}`;
                                const isChecked = userState[key] ? 'checked' : '';
                                return `
                                    <div onclick="toggleAch('${key}')" class="achievement-card flex items-start gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors">
                                        <input type="checkbox" ${isChecked} class="custom-checkbox w-5 h-5 rounded border-slate-300 text-blue-600 mt-0.5 pointer-events-none">
                                        <label class="text-xs font-bold text-slate-700 cursor-pointer select-none leading-relaxed">${ach}</label>
                                    </div>
                                `;
                            }).join('')}
                        </div>
                    </div>

                    <div class="space-y-6">
                        <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest pl-2">Exerc√≠cios da Fase</h3>
                        ${data.sections.map(section => `
                            <div class="bg-white rounded-3xl overflow-hidden border border-slate-200 shadow-sm p-6">
                                <div class="flex justify-between items-start mb-2 gap-4">
                                    <h4 class="font-black text-slate-800 text-sm italic">${section.name}</h4>
                                    <span class="text-[9px] font-black bg-slate-900 text-white px-2 py-1 rounded-lg uppercase whitespace-nowrap shrink-0">${section.dosage}</span>
                                </div>
                                <p class="text-slate-500 text-xs leading-relaxed mb-0 whitespace-pre-line">${section.desc}</p>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            container.innerHTML = html;
            updateUI();
        }

        function toggleAch(key) {
            userState[key] = !userState[key];
            localStorage.setItem('jp_portal_state', JSON.stringify(userState));
            renderPhase(activePhase);
        }

        function updateUI() {
            // Conta Progresso Global
            let total = 0, done = 0;
            Object.keys(portalData).forEach(pId => {
                if(pId === "0") return; 
                portalData[pId].achievements.forEach((_, idx) => {
                    total++;
                    if(userState[`f${pId}_c${idx}`]) done++;
                });
            });

            const perc = Math.round((done/total)*100) || 0;
            document.getElementById('header-perc').innerText = perc + '%';
            document.getElementById('progress-circle').setAttribute('stroke-dasharray', `${perc}, 100`);

            // Conta Progresso da Fase
            if(activePhase !== 0) {
                const phaseTotal = portalData[activePhase].achievements.length;
                let phaseDone = 0;
                portalData[activePhase].achievements.forEach((_, idx) => {
                    if(userState[`f${activePhase}_c${idx}`]) phaseDone++;
                });
                document.getElementById('phase-counter').innerText = `${phaseDone}/${phaseTotal}`;

                // 4. EFEITO DE CONFETTI SE COMPLETAR A FASE
                if(phaseDone === phaseTotal && phaseTotal > 0) {
                    confetti({
                        particleCount: 100,
                        spread: 70,
                        origin: { y: 0.6 }
                    });
                }
            }
        }

        window.onload = () => {
            renderPhase(0);
        };
    </script>
</body>
</html>